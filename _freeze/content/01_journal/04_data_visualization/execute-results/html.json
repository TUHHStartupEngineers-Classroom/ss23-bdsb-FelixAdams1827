{
  "hash": "cdc00ea2b03cedf0e7b6af1d23410f55",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"**Felix Adamaszek**, *Matr. Nr. 52505*\"\n---\n\n\n# **First Challenge**\n## **Importieren der benoetigten Daten**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_239dfd28c010cb3c8a8093f1722b5e60'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 306118 Columns: 67\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr   (4): iso_code, continent, location, tests_units\n#> dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...\n#> date  (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\ncountries <- covid_data_tbl %>%\n  group_by(location) %>% \n  group_split(.keep = TRUE)\n```\n:::\n\n\n## **Filtern der importierten Daten**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-2_7328f845296feb28d384637ee753d3b5'}\n\n```{.r .cell-code}\nfilter <- c(\"Germany\", \"United States\", \"United Kingdom\", \"France\", \"Spain\")\n\ngetCountry <- function(x, country){\n  countries_select <- data.frame()\n  for(i in 1:length(x)){\n    if(x[[i]]$location[[1]] %in% country){\n      return (x[[i]])\n    } else {\n      next\n    }\n  }\n  return (countries_select)\n}\n```\n:::\n\n\n## **Auswahl einzelner Länder**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-3_dcabad4e6558ea95f4704d9a3efab685'}\n\n```{.r .cell-code}\nselection <- getCountry(countries, c(\"Germany\")) %>% \n  rbind(getCountry(countries, c(\"United States\"))) %>% \n  rbind(getCountry(countries, c(\"United Kingdom\"))) %>% \n  rbind(getCountry(countries, c(\"France\"))) %>% \n  rbind(getCountry(countries, c(\"Spain\")))\n```\n:::\n\n  \n## **Darstellung als Graph**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-4_962b9ffa02c687677cbd2182530c9f47'}\n\n```{.r .cell-code}\nselection %>% \n  ggplot(aes(date, total_cases, color = location))+\n  geom_line(linewidth = 0.5) + \n  scale_y_continuous(labels = scales::comma) +\n  theme(\n    legend.position = \"bottom\",\n  ) + \n  labs(\n    title = \"Summe der Covid Faelle pro Land\",\n    subtitle = \"Trend zunehmend\",\n    x = \"Jahr\",\n    y = \"Summe der Faelle\",\n    color = \"Betrachtete Laender\",\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: Removed 79 rows containing missing values (`geom_line()`).\n```\n:::\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n# **Second Challenge**\n\n## **Daten importieren**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-5_d1fb98afd93ff9ffc6f94896e98cbf85'}\n\n```{.r .cell-code}\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 306118 Columns: 67\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr   (4): iso_code, continent, location, tests_units\n#> dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...\n#> date  (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\n## **Daten vorbereiten**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-6_7f73a6100c43461941922eb8cd227079'}\n\n```{.r .cell-code}\ndata <- covid_data_tbl %>% \n  select(location, total_deaths) %>% \n  group_by(location) %>% \n  slice_max(order_by = total_deaths, n = 1) %>% \n  mutate(location = case_when(\n    \n    location == \"United Kingdom\" ~ \"UK\",\n    location == \"United States\" ~ \"USA\",\n    location == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n    TRUE ~ location\n    \n  )) %>%\n  distinct()\n```\n:::\n\n\n## **Entfernen von nicht benötigten Daten**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-7_0f6f47a7fcdb3b72d4c2a2935b6a3b74'}\n\n```{.r .cell-code}\ndata <- data[!grepl(\"World\", data$location),]\ndata <- data[!grepl(\"income\", data$location),]\ndata <- data[!grepl(\"Europe\", data$location),]\ndata <- data[!grepl(\"North America\", data$location),]\ndata <- data[!grepl(\"South America\", data$location),]\ndata <- data[!grepl(\"Asia\", data$location),]\n```\n:::\n\n\n## **Importieren der Karte**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-8_5cb1a172b1028b2ea73de16a134b3382'}\n\n```{.r .cell-code}\nworld <- map_data(\"world\")\n```\n:::\n\n\n## **Plot der Karte**\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-9_bb87a393a58714d9a900cb75c04835d0'}\n\n```{.r .cell-code}\np <- ggplot() +\n  geom_map(data = world, map = world,\n           aes(x = long, y = lat, group = group, map_id=region),\n           fill = \"white\", colour = \"#7f7f7f\", linewidth = 0.5) +\n  \n  geom_map(data = data, map=world,\n           aes(fill=total_deaths, map_id=location, color = total_deaths),\n           colour=\"#7f7f7f\", linewidth=0.5) +\n  \n  scale_fill_continuous(low=\"red\", high=\"black\", guide=\"colorbar\") +\n  scale_y_continuous(breaks=c()) +\n  scale_x_continuous(breaks=c()) +\n  labs(title=\"Covid Sterblichkeit\", fill=\"legend\") +\n  theme_bw()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning in geom_map(data = world, map = world, aes(x = long, y = lat, group =\n#> group, : Ignoring unknown aesthetics: x and y\n```\n:::\n\n```{.r .cell-code}\np\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}