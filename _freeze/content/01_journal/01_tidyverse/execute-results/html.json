{
  "hash": "36f8008e8fb1c4fb4794168d3096dc7a",
  "result": {
    "markdown": "---\ntitle: \"Tidyverse challenge\"\nauthor: \"**Felix Adamaszek**, *Matr. Nr. 52505*\"\n---\n\n\n::: callout-note\nDies sind erst vorläufige Ergebnisse und noch nicht final zu bewerten\n:::\n\n# Text Formatting\n\n*italics* and **bold**\n\nsuperscript^2^ / subscript~2~\n\n~~strikethrough~~\n\n`verbatim code`\n\n> Blockquote\n\n# Headings\n\n## Header 2\n### Header 3\n#### Header 4\n##### Header 5\n###### Header 6\n\n# Images\n\n\n![Revenue by State](../../assets/img/graph.png)\n\n# Source Code\n\n\n\n::: {.cell hash='01_tidyverse_cache/html/unnamed-chunk-1_032889b33242af184c810a237bc2c74f'}\n\n```{.r .cell-code}\n# Intro to the tidyverse Challenge\n\n# 1.0 Load libraries ----\n\n          library(tidyverse)\n          library(readxl)\n\n# 2.0 Importing needed files ----\n\n          bikes_tbl      <- read_excel(path = \"/Users/felixadamaszek/Documents/GitHub/ss23-bdsb-FelixAdams1827/Eigener Ordner/Intro to the tidyverse/Business Case/01_bike_sales/01_raw_data/bikes.xlsx\")\n          orderlines_tbl <- read_excel(\"/Users/felixadamaszek/Documents/GitHub/ss23-bdsb-FelixAdams1827/Eigener Ordner/Intro to the tidyverse/Business Case/01_bike_sales/01_raw_data/orderlines.xlsx\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> New names:\n#> • `` -> `...1`\n```\n:::\n\n```{.r .cell-code}\n          bikeshops_tbl  <- read_excel(\"/Users/felixadamaszek/Documents/GitHub/ss23-bdsb-FelixAdams1827/Eigener Ordner/Intro to the tidyverse/Business Case/01_bike_sales/01_raw_data/bikeshops.xlsx\")\n\n# 3.0 Joining Data ----\n\n          bike_orderlines_joined_tbl <- orderlines_tbl %>%\n          left_join(bikes_tbl, by = c(\"product.id\" = \"bike.id\")) %>%\n          left_join(bikeshops_tbl, by = c(\"customer.id\" = \"bikeshop.id\"))\n\n# 4.0 Wrangling Data ----\n\n          bike_orderlines_wrangled_tbl <- bike_orderlines_joined_tbl %>%\n  \n  # 4.1 Separate column location ----\n\n          separate(col    = location,\n          into   = c(\"city\", \"state\"),\n          sep    = \", \") %>%\n  \n  # 4.2 Add the total price (price * quantity) \n\n          mutate(total.price = price * quantity) %>%\n  \n  # 4.3 Rename columns \n  \n          rename(bikeshop = name) %>%\n          set_names(names(.) %>% str_replace_all(\"\\\\.\", \"_\"))\n\n# 5.0 Business Insights ----\n  # 5.1 Sales by location (state) ----\n    # Which state has the highest revenue?\n\n    # Step 1 - Manipulating the data\n\n        library(lubridate)\n        sales_by_state_tbl <- bike_orderlines_wrangled_tbl %>%\n  \n    # Select needed columns\n        select(state, total_price) %>%\n  \n    # Grouping by state and summarizing the sales\n        group_by(state) %>% \n        summarize(sales = sum(total_price)) %>%\n        \n    # Adding a column that turns the numbers into a currency format\n        mutate(sales_text = scales::dollar(sales, big.mark = \".\", \n                                     decimal.mark = \",\", \n                                     prefix = \"\", \n                                     suffix = \" €\"))\n\n        sales_by_state_tbl\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"state\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sales\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sales_text\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"Baden-Württemberg\",\"2\":\"6521090\",\"3\":\"6.521.090 €\"},{\"1\":\"Bavaria\",\"2\":\"6742819\",\"3\":\"6.742.819 €\"},{\"1\":\"Berlin\",\"2\":\"1128433\",\"3\":\"1.128.433 €\"},{\"1\":\"Bremen\",\"2\":\"10653499\",\"3\":\"10.653.499 €\"},{\"1\":\"Hamburg\",\"2\":\"3874756\",\"3\":\"3.874.756 €\"},{\"1\":\"Hesse\",\"2\":\"1558901\",\"3\":\"1.558.901 €\"},{\"1\":\"Lower Saxony\",\"2\":\"4107115\",\"3\":\"4.107.115 €\"},{\"1\":\"Mecklenburg-Western Pomerania\",\"2\":\"618974\",\"3\":\"618.974 €\"},{\"1\":\"North Rhine-Westphalia\",\"2\":\"21200613\",\"3\":\"21.200.613 €\"},{\"1\":\"Saxony\",\"2\":\"2230245\",\"3\":\"2.230.245 €\"},{\"1\":\"Saxony-Anhalt\",\"2\":\"569614\",\"3\":\"569.614 €\"},{\"1\":\"Schleswig-Holstein\",\"2\":\"3224749\",\"3\":\"3.224.749 €\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell hash='01_tidyverse_cache/html/plot_561ffda53d479f2b78db0ab941916e4e'}\n\n```{.r .cell-code}\n        # Step 2 - Visualize the data\n        sales_by_state_tbl %>%\n          \n          # Setup canvas with the columns year (x-axis) and sales (y-axis)\n          ggplot(aes(x = state, y = sales)) +\n          \n          \n          # Geometries\n          geom_col(fill = \"#2DC6D6\") + \n          geom_label(aes(label = sales_text)) +\n          \n          # Hint\n          theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n          theme(axis.text.y = element_text(angle = 45, hjust = 1)) +\n          \n          # Formatting\n          scale_y_continuous(labels = scales::dollar_format(big.mark = \".\", \n                                                            decimal.mark = \",\", \n                                                            prefix = \"\", \n                                                            suffix = \" €\")) +\n          labs(\n            title    = \"Revenue by state\",\n            x = \"States\",\n            y = \"Revenue\"\n          )\n```\n\n::: {.cell-output-display}\n![](01_tidyverse_files/figure-html/plot-1.png){width=1248}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}